function ValidarEstadoLog(e){if(e){var a=e,t=new FormData;t.append("idUsuario4",a),$.ajax({url:"public/views/src/ajaxUsuarios.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){2==e.idEstado&&(window.location="logout")}})}}function cargarAteRegAnu(e,a){var t=e,r=a,o=new FormData;o.append("param4",4),o.append("inicio",t),o.append("fin",r),$.ajax({url:"public/views/src/ajaxGraficos.php",method:"POST",cache:!1,data:o,contentType:!1,processData:!1,dataType:"json",success:function(e){if(e.length>0){for(var a=[],t=[],r=[],o=0;o<e.length;o++)a.push(e[o][1]),t.push(e[o][2]),r.push(e[o][3]);var n="index",i=!0;$("canvas#rgAtenAnuReg").remove(),$("div.rgen1").append('<canvas id="rgAtenAnuReg" width="350" height="350"></canvas>');var s=document.getElementById("rgAtenAnuReg").getContext("2d");new Chart(s,{type:"bar",data:{labels:a,datasets:[{label:"Registradas",backgroundColor:"#007bff",borderColor:"#007bff",data:t},{label:"Anuladas",backgroundColor:"#ced4da",borderColor:"#ced4da",data:r}]},options:{maintainAspectRatio:!1,tooltips:{mode:n,intersect:i},hover:{mode:n,intersect:i},title:{display:!0,text:"Atenciones Registradas y Anuladas"},legend:{display:!1},scales:{xAxes:[{ticks:{fontColor:"#3D3838"},gridLines:{display:!1,color:"#F1740C",drawBorder:!1}}],yAxes:[{ticks:{fontColor:"#3D3838",stepSize:20},gridLines:{display:!0,color:"#3D3838",drawBorder:!1}}]}}})}else{$("canvas#rgAtenAnuReg").remove(),$("div.rgen1").append('<canvas id="rgAtenAnuReg" width="350" height="350"></canvas>');s=document.getElementById("rgAtenAnuReg").getContext("2d"),new Chart(s,{type:"bar",data:{labels:["SIN DATOS"],datasets:[{label:"Registradas",backgroundColor:"#007bff",borderColor:"#007bff",data:[0]},{label:"Anuladas",backgroundColor:"#ced4da",borderColor:"#ced4da",data:[0]}]},options:{maintainAspectRatio:!1,tooltips:{mode:n,intersect:i},hover:{mode:n,intersect:i},title:{display:!0,text:"Atenciones Registradas y Anuladas"},legend:{display:!1},scales:{xAxes:[{ticks:{fontColor:"#3D3838"},gridLines:{display:!1,color:"#F1740C",drawBorder:!1}}],yAxes:[{ticks:{fontColor:"#3D3838",stepSize:20},gridLines:{display:!0,color:"#3D3838",drawBorder:!1}}]}}})}}})}function cargarTipParen(e,a){var t=e,r=a,o=new FormData;o.append("param5",5),o.append("inicio",t),o.append("fin",r),$.ajax({url:"public/views/src/ajaxGraficos.php",method:"POST",cache:!1,data:o,contentType:!1,processData:!1,dataType:"json",success:function(e){if(e.length>0){for(var a=[],t=[],r=[],o=0;o<e.length;o++)a.push(e[o][1]),t.push(e[o][0]),r.push(colorRGB());$("canvas#rggTParen").remove(),$("div.rgen3").append('<canvas id="rggTParen" width="350" height="350"></canvas>');var n=document.getElementById("rggTParen").getContext("2d"),i={labels:a,datasets:[{label:"# de Frecuencia",data:t,backgroundColor:r,borderColor:r}]},s={maintainAspectRatio:!1,responsive:!0,title:{display:!0,text:"Seguimientos x Parentesco"},legend:{position:"left"}};new Chart(n,{type:"doughnut",data:i,options:s})}else{$("canvas#rggTParen").remove(),$("div.rgen3").append('<canvas id="rggTParen" width="350" height="350"></canvas>');n=document.getElementById("rggTParen").getContext("2d"),i={labels:["SIN DATOS"],datasets:[{label:"# de Frecuencia",data:[0],backgroundColor:r,borderColor:r}]},s={maintainAspectRatio:!1,responsive:!0,title:{display:!0,text:"Seguimientos x Parentesco"},legend:{position:"left"}};new Chart(n,{type:"doughnut",data:i,options:s})}}})}function cargarSexoAte(e,a){var t=e,r=a,o=new FormData;o.append("param6",6),o.append("inicio",t),o.append("fin",r),$.ajax({url:"public/views/src/ajaxGraficos.php",method:"POST",cache:!1,data:o,contentType:!1,processData:!1,dataType:"json",success:function(e){if(e.length>0){for(var a=[],t=[],r=[],o=0;o<e.length;o++)a.push(e[o][1]),t.push(e[o][0]),r.push(colorRGB());$("canvas#rggTSexParen").remove(),$("div.rgen4").append('<canvas id="rggTSexParen" width="350" height="350"></canvas>');var n=document.getElementById("rggTSexParen").getContext("2d"),i={labels:a,datasets:[{label:"# de Seguimientos",data:t,backgroundColor:r}]},s={maintainAspectRatio:!1,responsive:!0,title:{display:!0,text:"Seguimientos x Sexo de Familiar"}};new Chart(n,{type:"pie",data:i,options:s})}else{$("canvas#rggTSexParen").remove(),$("div.rgen4").append('<canvas id="rggTSexParen" width="350" height="350"></canvas>');n=document.getElementById("rggTSexParen").getContext("2d"),i={labels:["SIN DATOS"],datasets:[{label:"# de Seguimientos",data:[0],backgroundColor:r}]},s={maintainAspectRatio:!1,responsive:!0,title:{display:!0,text:"Seguimientos x Sexo de Familiar"}};new Chart(n,{type:"pie",data:i,options:s})}}})}function cargarSegRegs(e,a){var t=e,r=a,o=new FormData;o.append("param7",7),o.append("inicio",t),o.append("fin",r),$.ajax({url:"public/views/src/ajaxGraficos.php",method:"POST",cache:!1,data:o,contentType:!1,processData:!1,dataType:"json",success:function(e){if(e.length>0){for(var a=[],t=[],r=[],o=0;o<e.length;o++)a.push(e[o][1]),t.push(e[o][2]),r.push(colorRGB());$("canvas#rggSegs").remove(),$("div.rgen2").append('<canvas id="rggSegs" width="350" height="350"></canvas>');var n=document.getElementById("rggSegs").getContext("2d"),i={labels:a,datasets:[{fill:!0,borderWidth:2,lineTension:0,spanGaps:!0,borderColor:"#17a2b8",pointRadius:3,pointHoverRadius:7,pointColor:"#17a2b8",pointBackgroundColor:"#17a2b8",data:t}]},s={maintainAspectRatio:!1,responsive:!0,legend:{display:!1},scales:{xAxes:[{ticks:{fontColor:"#000"},gridLines:{display:!1,color:"#000",drawBorder:!1}}],yAxes:[{ticks:{stepSize:50,fontColor:"#6A6A6A"},gridLines:{display:!0,color:"#AFAFAF",drawBorder:!1}}]},title:{display:!0,text:"Seguimientos realizados"}};new Chart(n,{type:"line",data:i,options:s})}else{$("canvas#rggSegs").remove(),$("div.rgen2").append('<canvas id="rggSegs" width="350" height="350"></canvas>');n=document.getElementById("rggSegs").getContext("2d"),i={labels:["SIN DATOS"],datasets:[{fill:!0,borderWidth:2,lineTension:0,spanGaps:!0,borderColor:"#17a2b8",pointRadius:3,pointHoverRadius:7,pointColor:"#17a2b8",pointBackgroundColor:"#17a2b8",data:[0]}]},s={maintainAspectRatio:!1,responsive:!0,legend:{display:!1},scales:{xAxes:[{ticks:{fontColor:"#000"},gridLines:{display:!1,color:"#000",drawBorder:!1}}],yAxes:[{ticks:{stepSize:50,fontColor:"#6A6A6A"},gridLines:{display:!0,color:"#AFAFAF",drawBorder:!1}}]},title:{display:!0,text:"Seguimientos realizados"}},new Chart(n,{type:"line",data:i,options:s})}}})}function generarNumero(e){return(Math.random()*e).toFixed(0)}function colorRGB(){return"rgb"+("("+generarNumero(255)+","+generarNumero(255)+","+generarNumero(255)+")")}cargarAteRegAnu("",""),cargarSexoAte("",""),cargarTipParen("",""),cargarSegRegs("",""),$("#deshacer-filtro-RG").on("click",function(){window.location="reporte-general"}),window.onbeforeunload=ValidarEstadoLog($("#estatusLog").val()),$("input[name='rango-rg']").daterangepicker({opens:"left",maxSpan:{days:30},startDate:moment(),endDate:moment(),maxDate:moment(),locale:{format:"DD/MM/YYYY",separator:" hasta ",applyLabel:"Aplicar",cancelLabel:"Cancelar",fromLabel:"Desde",toLabel:"Hasta",customRangeLabel:"Personalizar",weekLabel:"W",daysOfWeek:["Do","Lu","Ma","Mie","Ju","Vi","Sa"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"],firstDay:1}},function(e,a){let t=e.format("YYYY-MM-DD"),r=a.format("YYYY-MM-DD");$(".rg1").attr("href","public/views/docs/rp-audfamiliares.php?reporte=reporte&inicio="+t+"&fin="+r),$(".rg2").attr("href","public/views/docs/rp-audatenciones.php?reporte=reporte&inicio="+t+"&fin="+r),cargarAteRegAnu(t,r),cargarTipParen(t,r),cargarSexoAte(t,r),cargarSegRegs(t,r)});